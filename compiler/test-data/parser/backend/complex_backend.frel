module backend.complex_backend

enum EditorState { Idle Editing Saving Error }

scheme User {
    name : String
    email : String
}

contract UserAPI {
    get_user(userId : Uuid) : User
}

backend UserEditorBackend {
    userId : Uuid
    user : User = UserAPI.get_user(userId)
    editedName : String = user.name
    editedEmail : String = user.email
    state : EditorState = EditorState.Idle
    errorMessage : String? = null

    method is_dirty() : bool
    method can_save() : bool
    method get_validation_errors() : List<String>

    command start_editing()
    command cancel_editing()
    command save_changes()
    command reset_form()
}
